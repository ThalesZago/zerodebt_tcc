{"version":3,"file":"mat-select-filter.js","sources":["mat-select-filter/lib/mat-select-filter.service.ts","mat-select-filter/lib/mat-select-filter.component.ts","mat-select-filter/lib/mat-select-filter.module.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MatSelectFilterService {\n\n  constructor() { }\n}\n","import { Component, OnInit, Input, EventEmitter, Output, ViewChild, OnDestroy } from '@angular/core';\nimport { FormGroup, FormBuilder } from '@angular/forms';\nimport {\n  A,\n  Z,\n  ZERO,\n  NINE,\n  SPACE, END, HOME,\n} from '@angular/cdk/keycodes';\n@Component({\n  selector: 'mat-select-filter',\n  template: `\n  <form [formGroup]=\"searchForm\" class=\"mat-filter\" [ngStyle]=\"{'background-color': color ? color : 'white'}\">\n  <div>\n  <input #input class=\"mat-filter-input\" matInput placeholder=\"{{placeholder}}\" formControlName=\"value\" (keydown)=\"handleKeydown($event)\">\n    <mat-spinner *ngIf=\"localSpinner\" class=\"spinner\" diameter=\"16\"></mat-spinner>\n  </div>\n  <div *ngIf=\"noResults\"\n     class=\"noResultsMessage\">\n  {{noResultsMessage}}\n</div>\n</form>\n  `,\n  styleUrls: ['./mat-select-filter.component.scss']\n})\nexport class MatSelectFilterComponent implements OnInit, OnDestroy {\n  @ViewChild('input', { static: true }) input;\n\n  @Input('array') array: any;\n  @Input('placeholder') placeholder: string;\n  @Input('color') color: string;\n  @Input('displayMember') displayMember: string;\n  @Input('showSpinner') showSpinner = true;\n  @Input('noResultsMessage') noResultsMessage = 'No results';\n  @Input('hasGroup') hasGroup: boolean;\n  @Input('groupArrayName') groupArrayName: string;\n\n  noResults = false;\n\n  localSpinner = false;\n  @Output() filteredReturn = new EventEmitter<any>();\n\n  public filteredItems: any = [];\n  public searchForm: FormGroup;\n\n  constructor(fb: FormBuilder) {\n    this.searchForm = fb.group({\n      value: ''\n    });\n  }\n\n  ngOnInit() {\n    this.searchForm.valueChanges.subscribe(value => {\n      if (this.showSpinner) {\n        this.localSpinner = true;\n      }\n      if (value['value']) {\n        // IF THE DISPLAY MEMBER INPUT IS SET WE CHECK THE SPECIFIC PROPERTY\n        if (this.displayMember == null) {\n          this.filteredItems = this.array.filter(name => name.toLowerCase().includes(value['value'].toLowerCase()));\n          // OTHERWISE, WE CHECK THE ENTIRE STRING\n        } else if (this.hasGroup && this.groupArrayName && this.displayMember) {\n          this.filteredItems = this.array.map(a => {\n            const objCopy = Object.assign({}, a);\n            objCopy[this.groupArrayName] = objCopy[this.groupArrayName].filter(g => g[this.displayMember].toLowerCase().includes(value['value'].toLowerCase()));\n            return objCopy;\n          }).filter(x => x[this.groupArrayName].length > 0);\n        } else {\n          this.filteredItems = this.array.filter(name => name[this.displayMember].toLowerCase().includes(value['value'].toLowerCase()));\n        }\n        // NO RESULTS VALIDATION\n\n        this.noResults = this.filteredItems == null || this.filteredItems.length === 0;\n\n\n      } else {\n        this.filteredItems = this.array.slice();\n        this.noResults = false;\n      }\n      this.filteredReturn.emit(this.filteredItems);\n      setTimeout(() => {\n        if (this.showSpinner) {\n          this.localSpinner = false;\n        }\n      }, 2000);\n    });\n\n    setTimeout(() => {\n      this.input.nativeElement.focus();\n    }, 500);\n    if (!this.placeholder) {\n      this.placeholder = 'Search...';\n    }\n  }\n\n  handleKeydown(event: KeyboardEvent) {\n    // PREVENT PROPAGATION FOR ALL ALPHANUMERIC CHARACTERS IN ORDER TO AVOID SELECTION ISSUES\n    if ((event.key && event.key.length === 1) ||\n      (event.keyCode >= A && event.keyCode <= Z) ||\n      (event.keyCode >= ZERO && event.keyCode <= NINE) ||\n      (event.keyCode === SPACE)) {\n      event.stopPropagation();\n    }\n  }\n  ngOnDestroy() {\n    this.filteredReturn.emit(this.array);\n  }\n}\n","import { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSelectFilterComponent } from './mat-select-filter.component';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n@NgModule({\n  declarations: [MatSelectFilterComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MatProgressSpinnerModule\n  ],\n  exports: [MatSelectFilterComponent]\n})\nexport class MatSelectFilterModule { }\n"]}